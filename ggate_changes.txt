
# log in as ggate
su - ggate

# change to ggate home 
cd /oracle/product/12.1.2/ggate/

# set DB
export ORAENV_ASK=NO;
export ORACLE_SID=test;
. oraenv


./ggsci

# password alias
ADD CREDENTIALSTORE
ALTER CREDENTIALSTORE ADD USER GGATE_ADMIN, PASSWORD GGATE_ADMIN, ALIAS gg1 
ADD MASTERKEY  gg1 

# encryption keys
CREATE WALLET
OPEN WALLET
ADD MASTERKEY
INFO MASTERKEY ALL


# ADD HR schema
DBLOGIN USERID system PASSWORD Welcome01
# db parameter ENABLE_GOLDENGATE_REPLICATION=true else use ADD TRANDATA hr.*
ADD SCHEMATRANDATA hr

# mgr
status mgr
stop mgr

EDIT PARAMS MGR
-----
PORT 16000
AUTOSTART ER *
AUTORESTART ER *, RETRIES 4, WAITMINUTES 4
----

start mgr
status mgr


EDIT PARAMS ./GLOBALS
---
---


#Classic Capture Extract
# oracle/product/12.1.2/ggate/dirprm/hrtest.prm
EDIT PARAMS HRTEST

---
EXTRACT HRTEST
USERIDALIAS gg1
EXTTRAIL /oracle/product/12.1.2/ggate/dirdat/st
SEQUENCE hr.*;
TABLE hr.*;
---

---
EXTRACT HRTEST
USERIDALIAS gg1
LOGALLSUPCOLS
UPDATERECORDFORMAT COMPACT
DDL INCLUDE MAPPED
ENCRYPTTRAIL AES192
EXTTRAIL /oracle/product/12.1.2/ggate/dirdat/st
SEQUENCE hr.*;
TABLE hr.*;
---

ADD EXTRACT HRTEST, TRANLOG, BEGIN NOW
ADD EXTTRAIL /oracle/product/12.1.2/ggate/dirdat/st, EXTRACT HRTEST

START EXTRACT HRTEST
STATUS EXTRACT HRTEST

# check log files /oracle/product/12.1.2/ggate/dirrpt/HRTEST.rpt


# datapump
edit params extpump

----
EXTRACT extpump
USERIDALIAS gg1
RMTHOST remoteip, MGRPORT 7809 ENCRYPT AES192, KEYNAME securekey2
RMTTRAIL /oracle/product/12.1.2/ggate/dirdat/rt
SEQUENCE hr.*;
TABLE hr.*;
---



